import React, { useEffect, useRef, useState } from 'react'
import { motion } from 'framer-motion'

import { colors } from '../../tailwind.config'

const letterSegments = [
  // A
  'M3.62375 139.636L83.6287 3.95285',
  'M83.6287 3.95285L163.634 139.636',
  'M133.871 139.636H163.634',
  'M133.871 139.636L83.6287 54.4182',
  'M83.6287 54.4182L33.3713 139.636',
  'M33.3713 139.636H3.62375',
  // V
  'M111.045 4.38354L191.005 140.067',
  'M191.005 140.067L256.203 29.5568',
  'M256.203 29.5568L263.45 41.1558',
  'M263.451 41.1558L278.554 15.537', 
  'M278.554 15.537L271.946 4.38354',
  'M271.946 4.38354H241.292',
  'M241.292 4.38354L191.049 89.6014',
  'M191.05 89.6014L140.792 4.38354',
  'M140.792 4.38354H111.045',
  // A
  'M219.995 139.636L300 3.95285',
  'M300 3.95285L380.005 139.636',
  'M350.243 139.636H380.005',
  'M350.243 139.636L300 54.4182',
  'M300 54.4182L249.758 139.636',
  'M249.757 139.636H219.995',
  // N
  'M319.886 15.537L326.48 4.38354',
  'M326.48 4.38354H357.134',
  'M357.134 4.38354L407.391 89.6014',
  'M407.391 89.6014L457.663 4.38354',
  'M457.663 4.38354H487.426',
  'M487.426 4.38354L407.406 140.096',
  'M407.406 140.096L342.193 29.542',
  'M342.193 29.542L334.99 41.141',
  'M334.99 41.141L319.886 15.537',
  // A
  'M436.366 139.636L516.371 3.95285',
  'M516.371 3.95285L596.376 139.636',
  'M566.614 139.636H596.376',
  'M566.614 139.636L516.371 54.4182',
  'M516.371 54.4182L466.129 139.636',
  'M466.129 139.636H436.366',
]

const crosshairs = [
  // A
  'M0.653442 139.631H3.62374M3.62374 139.631H6.59404M3.62374 139.631L2.10889 142.186M3.62374 139.631L5.13859 137.062',
  'M82.1139 1.39343L83.6287 3.94789M83.6287 3.94789L85.1436 6.50234M83.6287 3.94789L85.1436 1.39343M83.6287 3.94789L82.1139 6.50234',
  'M166.604 139.631H163.634M163.634 139.631H160.663M163.634 139.631L165.148 142.186M163.634 139.631L162.119 137.062',
  'M136.842 139.631H133.871M133.871 139.631H130.901M133.871 139.631L135.386 142.186M133.871 139.631L132.371 137.062',
  'M82.1139 51.8588L83.6287 54.4133M83.6287 54.4133L85.1436 56.9677M83.6287 54.4133L85.1436 51.8588M83.6287 54.4133L82.1139 56.9677',
  'M30.4159 139.631H33.3862M33.3862 139.631H36.3565M33.3862 139.631L31.8713 142.186M33.3862 139.631L34.8862 137.062',
  // V
  'M108.074 4.37858H111.045M111.045 4.37858H114.015M111.045 4.37858L109.53 1.82413M111.045 4.37858L112.559 6.93304',
  'M189.505 137.507L191.02 140.062M191.02 140.062L192.52 142.616M191.02 140.062L192.52 137.507M191.02 140.062L189.505 142.616',
  'M254.703 26.9825L256.203 29.537M256.203 29.537L257.718 32.0915M256.203 29.537L257.718 26.9825M256.203 29.537L254.703 32.0915',
  'M261.936 38.5816L263.451 41.136M263.451 41.136L264.965 43.6905M263.451 41.136L264.965 38.5816M263.451 41.136L261.936 43.6905',
  'M277.04 12.9776L278.555 15.532M278.555 15.532L280.055 18.0865M278.555 15.532L280.055 12.9776M278.555 15.532L277.04 18.0865',
  'M274.931 4.37858H271.96M271.96 4.37858H268.99M271.96 4.37858L270.446 1.82413M271.96 4.37858L273.46 6.93304',
  'M244.262 4.37858H241.292M241.292 4.37858H238.322M241.292 4.37858L242.807 1.82413M241.292 4.37858L239.792 6.93304',
  'M189.535 87.042L191.05 89.5964M191.05 89.5964L192.564 92.1509M191.05 89.5964L192.564 87.042M191.05 89.5964L189.535 92.1509',
  'M137.837 4.37858H140.807M140.807 4.37858H143.777M140.807 4.37858L139.292 1.82413M140.807 4.37858L142.307 6.93304',
  // A
  'M217.025 139.631H219.995M219.995 139.631H222.965M219.995 139.631L218.495 142.186M219.995 139.631L221.51 137.062',
  'M298.5 1.39343L300 3.94789M300 3.94789L301.515 6.50234M300 3.94789L301.515 1.39343M300 3.94789L298.5 6.50234',
  'M382.975 139.631H380.005M380.005 139.631H377.035M380.005 139.631L381.52 142.186M380.005 139.631L378.505 137.062',
  'M353.228 139.631H350.257M350.257 139.631H347.287M350.257 139.631L351.757 142.186M350.257 139.631L348.743 137.062',
  'M298.5 51.8588L300 54.4133M300 54.4133L301.515 56.9677M300 54.4133L301.515 51.8588M300 54.4133L298.5 56.9677',
  'M246.787 139.631H249.757M249.757 139.631H252.728M249.757 139.631L248.243 142.186M249.757 139.631L251.272 137.062',
  // N
  'M318.371 12.9776L319.886 15.532M319.886 15.532L321.386 18.0865M319.886 15.532L321.386 12.9776M319.886 15.532L318.371 18.0865',
  'M323.51 4.37858H326.48M326.48 4.37858H329.45M326.48 4.37858L327.995 1.82413M326.48 4.37858L324.965 6.93304',
  'M354.208 4.37858H357.178M357.178 4.37858H360.148M357.178 4.37858L355.663 1.82413M357.178 4.37858L358.678 6.93304',
  'M405.876 87.042L407.391 89.5964M407.391 89.5964L408.891 92.1509M407.391 89.5964L408.891 87.042M407.391 89.5964L405.876 92.1509',
  'M460.634 4.37858H457.663M457.663 4.37858H454.693M457.663 4.37858L459.178 1.82413M457.663 4.37858L456.163 6.93304',
  'M490.396 4.37858H487.426M487.426 4.37858H484.456M487.426 4.37858L488.941 1.82413M487.426 4.37858L485.911 6.93304',
  'M405.891 137.537L407.406 140.091M407.406 140.091L408.921 142.646M407.406 140.091L408.921 137.537M407.406 140.091L405.891 142.646',
  'M340.693 26.9825L342.193 29.537M342.193 29.537L343.708 32.0915M342.193 29.537L343.708 26.9825M342.193 29.537L340.693 32.0915',
  'M333.475 38.5816L334.99 41.136M334.99 41.136L336.49 43.6905M334.99 41.136L336.49 38.5816M334.99 41.136L333.475 43.6905',
  // A
  'M433.411 139.631H436.381M436.381 139.631H439.351M436.381 139.631L434.866 142.186M436.381 139.631L437.881 137.062',
  'M514.871 1.39343L516.371 3.94789M516.371 3.94789L517.886 6.50234M516.371 3.94789L517.886 1.39343M516.371 3.94789L514.871 6.50234',
  'M599.361 139.631H596.391M596.391 139.631H593.421M596.391 139.631L597.891 142.186M596.391 139.631L594.876 137.062',
  'M569.599 139.631H566.629M566.629 139.631H563.659M566.629 139.631L568.129 142.186M566.629 139.631L565.114 137.062',
  'M514.871 51.8588L516.371 54.4133M516.371 54.4133L517.886 56.9677M516.371 54.4133L517.886 51.8588M516.371 54.4133L514.871 56.9677',
  'M463.158 139.631H466.129M466.129 139.631H469.099M466.129 139.631L464.629 142.186M466.129 139.631L467.643 137.062',
]

interface LogoOutlinesProps {
  className?: string
}

const LogoOutlines: React.FC<LogoOutlinesProps> = ({ className, ...props }) => {
  const [ segmentDurations, setSegmentDurations ] = useState<number[]>([])
  const pathRefs = useRef<(SVGPathElement | null)[]>([])

  const calculateSegmentDurations = (): number[] =>
    pathRefs.current.map((path) => {
      if (path) {
        const length = path.getTotalLength()
        return length / 400
      }

      return 0.2
    })

  useEffect(() => {
    setSegmentDurations(calculateSegmentDurations())
  }, [])

  return (
    <motion.div className={className} initial={{ opacity: 1 }} animate={{ opacity: 0 }} transition={{ delay: 10, duration: 2 }} {...props}>
      <svg width="600" height="144" viewBox="0 0 600 144" fill="none" xmlns="http://www.w3.org/2000/svg">
        {letterSegments.map((path, i) => (
          <motion.path key={`segment-${i}`}
            ref={(ref) => pathRefs.current[i] = ref}
            d={path}
            stroke={colors['gray-light']}
            strokeWidth={0.5}
            initial={{ pathLength: 0 }}
            animate={{ pathLength: 1 }}
            transition={{
              delay: ((i + 1) * (segmentDurations[i] / 2 || 0.1)) + 5, 
              duration: segmentDurations[i] || 0.2
            }}
          />
        ))}
        {crosshairs.map((path, i) => (
          <motion.path key={`crosshair-${i}`}
            d={path}
            stroke={colors['gray-dark']}
            strokeWidth={0.5}
            initial={{ scale: 0.01 }}
            animate={{ scale: 1 }}
            transition={{
              delay: ((i + 1) * (segmentDurations[i] / 2 || 0.1)) + 5,
              duration: segmentDurations[i] || 0.2,
              type: 'spring',
              stiffness: 200,
              damping: 10
            }}
          />
        ))}
      </svg>
    </motion.div>
  )
}

LogoOutlines.displayName = 'LogoOutlines'

export default LogoOutlines
